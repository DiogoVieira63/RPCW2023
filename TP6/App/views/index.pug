extends layout


mixin anchorPage(page, num_page, text)
    button.w3-btn.w3-round-xxlarge.w3-amber.w3-margin
      a(href="/?page=" + page + "&num_page=" + num_page) #{text}


block content
  .w3-card-4
    header.w3-container.w3-indigo.w3-center
      h1 People List #[a.w3-button.w3-round-xxlarge(href="/pessoas/registo") +]

    .w3-container
      form(method="POST").w3-right
        input(type="number", value=num_page, name="num_page", min="1"  style="width: 80px")
        input(type="hidden", value=0, name="page")
        button.w3-btn.w3-round-xxlarge.w3-amber.w3-margin Change
      .w3-left
        - page = parseInt(page) || 0
        if max_page > 1
          if page > 0
            +anchorPage(page-1,num_page,"Previous")
          span #{page} of #{max_page}
          if page < max_page
            +anchorPage(page+1,num_page,"Next")

      table.w3-table-all
        tr
          th Id
          th Name
          th Age
          th Sex
          th City
          th Actions
        each s in slist
          tr(id = s._id)
            td= s._id
            td
              a(href="/pessoas/" + s._id)= s.nome
            td= s.idade
            td= s.sexo
            td= s.morada.cidade
            td 
              button.w3-btn.w3-round-xxlarge.w3-amber.w3-margin-right
                a(href="/pessoas/edit/" + s._id) 
                  <i class="fa fa-pencil-square-o" aria-hidden="true"></i>
              button.w3-btn.w3-round-xxlarge.w3-dark-grey.w3-margin-right  
                a(href="/pessoas/delete/" + s._id + "?confirm=true") 
                  <i class="fa fa-trash-o" aria-hidden="true"></i>
    
    footer.w3-container.w3-indigo
      h5 Generated by RPCW2023 in #{d}